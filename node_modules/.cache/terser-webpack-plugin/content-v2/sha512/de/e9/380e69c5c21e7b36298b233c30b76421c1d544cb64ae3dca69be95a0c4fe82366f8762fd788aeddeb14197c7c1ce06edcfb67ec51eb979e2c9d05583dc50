{"map":"{\"version\":3,\"sources\":[\"4.TerriaMap.js\"],\"names\":[\"self\",\"window\",\"push\",\"1621\",\"module\",\"exports\",\"__webpack_require__\",\"btn\",\"btn-primary\",\"btnPrimary\",\"btn-blink\",\"btnBlink\",\"btn-primary--hover\",\"btnPrimaryHover\",\"blinker\",\"toolButton\",\"augmentedVirtualityTool\",\"1622\",\"_defined\",\"_interopRequireDefault\",\"_defaultValue\",\"_knockout\",\"_Math\",\"_Matrix\",\"_Cartesian\",\"_EllipsoidTerrainProvider\",\"_sampleTerrainMostDetailed\",\"obj\",\"__esModule\",\"default\",\"AugmentedVirtuality\",\"terria\",\"that\",\"this\",\"_terria\",\"_eventLoopState\",\"_manualAlignment\",\"_maximumUpdatesPerSecond\",\"DEFAULT_MAXIMUM_UPDATES_PER_SECOND\",\"_orientationUpdated\",\"_alpha\",\"_beta\",\"_gamma\",\"_realignAlpha\",\"_realignHeading\",\"_hoverLevel\",\"PRESET_HEIGHTS\",\"length\",\"addEventListener\",\"event\",\"_storeOrientation\",\"track\",\"defineProperty\",\"get\",\"_eventLoopRunning\",\"set\",\"enable\",\"resetAlignment\",\"enabled\",\"_startEventLoop\",\"_getManualAlignment\",\"startEnd\",\"_setManualAlignment\",\"maximumUpdatesPerSecond\",\"MINIMUM_HOVER_HEIGHT\",\"prototype\",\"toggleEnabled\",\"toggleManualAlignment\",\"manualAlignment\",\"toggleHoverHeight\",\"hover\",\"height\",\"position\",\"flyTo\",\"cesium\",\"viewer\",\"camera\",\"positionCartographic\",\"clone\",\"scene\",\"terrainProvider\",\"flyToHeight\",\"then\",\"updatedPosition\",\"surfaceHeight\",\"newPosition\",\"fromRadians\",\"longitude\",\"latitude\",\"pose\",\"_getCurrentOrientation\",\"destination\",\"setView\",\"currentViewer\",\"notifyRepaintRequired\",\"moveTo\",\"maximumHeight\",\"cameraPosition\",\"viewerHeight\",\"moveToLocation\",\"undefined\",\"hoverHeight\",\"toDegrees\",\"heading\",\"intervalId\",\"intervalMs\",\"id\",\"setInterval\",\"_updateOrientation\",\"clearInterval\",\"alpha\",\"beta\",\"gamma\",\"screenOrientation\",\"_getCurrentScreenOrientation\",\"_lastScreenOrientation\",\"realignAlpha\",\"realignHeading\",\"_computeTerriaOrientation\",\"rotationIncrement\",\"rotation\",\"IDENTITY\",\"fromRotationZ\",\"toRadians\",\"multiply\",\"fromRotationX\",\"fromRotationY\",\"r10\",\"COLUMN1ROW0\",\"r11\",\"COLUMN1ROW1\",\"r02\",\"COLUMN0ROW2\",\"r12\",\"COLUMN1ROW2\",\"r22\",\"COLUMN2ROW2\",\"Math\",\"atan2\",\"roll\",\"pitch\",\"sqrt\",\"orientation\",\"screen\",\"angle\",\"760\",\"_react\",\"_createReactClass\",\"_propTypes\",\"_ObserveModelMixin\",\"_augmented_virtuality_tool\",\"_Icon\",\"_ViewerMode\",\"_reactI18next\",\"_AugmentedVirtuality\",\"AugmentedVirtualityTool\",\"displayName\",\"mixins\",\"propTypes\",\"object\",\"isRequired\",\"viewState\",\"experimentalWarning\",\"bool\",\"t\",\"func\",\"getInitialState\",\"augmentedVirtuality\",\"props\",\"experimentalWarningShown\",\"realignHelpShown\",\"resetRealignHelpShown\",\"handleClickAVTool\",\"state\",\"setState\",\"notifications\",\"title\",\"message\",\"confirmText\",\"handleClickRealign\",\"img\",\"handleClickResetRealign\",\"handleClickHover\",\"render\",\"toggleImage\",\"GLYPHS\",\"arOff\",\"toggleStyle\",\"arOn\",\"realignment\",\"realignmentStyle\",\"hoverLevel\",\"hoverImage\",\"arHover0\",\"arHover1\",\"arHover2\",\"viewerMode\",\"Leaflet\",\"createElement\",\"className\",\"type\",\"onClick\",\"glyph\",\"key\",\"manualAlignmentSet\",\"arRealign\",\"arResetAlignment\",\"withTranslation\"],\"mappings\":\"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\"}","code":"((self||window).webpackJsonp=(self||window).webpackJsonp||[]).push([[4],{1621:function(t,e,i){t.exports={btn:\"tjs-augmented_virtuality_tool__btn tjs-_buttons__btn tjs-_buttons__btn tjs-nav__btn tjs-_buttons__btn\",\"btn-primary\":\"tjs-augmented_virtuality_tool__btn-primary tjs-_buttons__btn tjs-_buttons__btn tjs-nav__btn tjs-_buttons__btn\",btnPrimary:\"tjs-augmented_virtuality_tool__btn-primary tjs-_buttons__btn tjs-_buttons__btn tjs-nav__btn tjs-_buttons__btn\",\"btn-blink\":\"tjs-augmented_virtuality_tool__btn-blink tjs-_buttons__btn tjs-_buttons__btn tjs-nav__btn tjs-_buttons__btn\",btnBlink:\"tjs-augmented_virtuality_tool__btn-blink tjs-_buttons__btn tjs-_buttons__btn tjs-nav__btn tjs-_buttons__btn\",\"btn-primary--hover\":\"tjs-augmented_virtuality_tool__btn-primary--hover\",btnPrimaryHover:\"tjs-augmented_virtuality_tool__btn-primary--hover\",blinker:\"tjs-augmented_virtuality_tool__blinker\",toolButton:\"tjs-augmented_virtuality_tool__toolButton\",augmentedVirtualityTool:\"tjs-augmented_virtuality_tool__augmentedVirtualityTool tjs-tool_button__toolButton\"}},1622:function(t,e,i){\"use strict\";var a=_(i(8)),n=_(i(9)),r=_(i(22)),l=_(i(14)),o=_(i(43)),s=_(i(12)),u=_(i(354)),d=_(i(689));function _(t){return t&&t.__esModule?t:{default:t}}var h=function t(e){var i=this;this._terria=e,this._eventLoopState={},this._manualAlignment=!1,this._maximumUpdatesPerSecond=t.DEFAULT_MAXIMUM_UPDATES_PER_SECOND,this._orientationUpdated=!1,this._alpha=0,this._beta=0,this._gamma=0,this._realignAlpha=0,this._realignHeading=0,this._hoverLevel=t.PRESET_HEIGHTS.length-1,\"ondeviceorientation\"in window&&window.addEventListener(\"deviceorientation\",(function(t){i._storeOrientation(t)})),r.default.track(this,[\"_eventLoopState\",\"_manualAlignment\",\"_maximumUpdatesPerSecond\",\"_realignAlpha\",\"_realignHeading\",\"_hoverLevel\"]),r.default.defineProperty(this,\"enabled\",{get:function(){return this._eventLoopRunning()||this._manualAlignment},set:function(t){!0!==t&&(t=!1,this.resetAlignment()),t!==this.enabled&&(this._manualAlignment=!1,this._startEventLoop(t))}}),r.default.defineProperty(this,\"manualAlignment\",{get:function(){return this._getManualAlignment()},set:function(t){this._setManualAlignment(t)}}),r.default.defineProperty(this,\"manualAlignmentSet\",{get:function(){return 0!==this._realignAlpha||0!==this._realignHeading}}),r.default.defineProperty(this,\"hoverLevel\",{get:function(){return this._hoverLevel}}),r.default.defineProperty(this,\"maximumUpdatesPerSecond\",{get:function(){return this._maximumUpdatesPerSecond},set:function(t){this._maximumUpdatesPerSecond=t,this._eventLoopRunning()&&(this._startEventLoop(!1),this._startEventLoop(!0))}}),this.enabled=!1};h.DEFAULT_MAXIMUM_UPDATES_PER_SECOND=10,h.MINIMUM_HOVER_HEIGHT=20,h.PRESET_HEIGHTS=[1e3,250,20],h.prototype.toggleEnabled=function(){this.enabled=!this.enabled},h.prototype.toggleManualAlignment=function(){this.manualAlignment=!this.manualAlignment},h.prototype.resetAlignment=function(){this._orientationUpdated=!0,this._realignAlpha=0,this._realignHeading=0},h.prototype.toggleHoverHeight=function(){this._hoverLevel=(this._hoverLevel+1)%h.PRESET_HEIGHTS.length,this.hover(h.PRESET_HEIGHTS[this._hoverLevel])},h.prototype.hover=function(t,e,i){var r=this;if((0,a.default)(this._terria.cesium)&&(0,a.default)(this._terria.cesium.viewer)&&(0,a.default)(this._terria.cesium.viewer.camera)){var l=this._terria.cesium.viewer.camera;if((0,a.default)(e)||(e=l.positionCartographic.clone()),i=(0,n.default)(i,!0),t<h.MINIMUM_HOVER_HEIGHT&&(t=h.MINIMUM_HOVER_HEIGHT),!(0,a.default)(this._terria.cesium)||!(0,a.default)(this._terria.cesium.scene)||!(0,a.default)(this._terria.cesium.scene.terrainProvider)||this._terria.cesium.scene.terrainProvider instanceof u.default)_(0);else{var o=this._terria.cesium.scene.terrainProvider;(0,d.default)(o,[e]).then((function(t){_(t[0].height)}))}}function _(n){(0,a.default)(n)&&(t+=n);var o=s.default.fromRadians(e.longitude,e.latitude,t),u=r._getCurrentOrientation();u.destination=o,i?l.flyTo(u):l.setView(u),r._terria.currentViewer.notifyRepaintRequired()}},h.prototype.moveTo=function(t,e,i){var n=this;if(!this._manualAlignment&&(0,a.default)(this._terria.cesium)&&(0,a.default)(this._terria.cesium.viewer)&&(0,a.default)(this._terria.cesium.viewer.camera)){var r=this._terria.cesium.viewer.camera.positionCartographic.clone(),l=r.height;if(!(0,a.default)(this._terria.cesium)||!(0,a.default)(this._terria.cesium.scene)||!(0,a.default)(this._terria.cesium.scene.terrainProvider)||this._terria.cesium.scene.terrainProvider instanceof u.default)s(void 0);else{var o=this._terria.cesium.scene.terrainProvider;(0,d.default)(o,[r]).then((function(t){s(t[0].height)}))}}function s(r){(0,a.default)(r)||(r=0);var o=l-r;(0,a.default)(e)&&o>e&&(o=e),n.hover(o,t,i)}},h.prototype._getManualAlignment=function(){return this.enabled&&this._manualAlignment},h.prototype._setManualAlignment=function(t){!0===this.enabled&&(!0!==t&&(t=!1),!1===t&&(0,a.default)(this._terria.cesium)&&(0,a.default)(this._terria.cesium.viewer)&&(0,a.default)(this._terria.cesium.viewer.camera)&&(this._realignAlpha=this._alpha,this._realignHeading=l.default.toDegrees(this._terria.cesium.viewer.camera.heading)),this._manualAlignment!==t&&(this._manualAlignment=t,this._startEventLoop(!this._manualAlignment)))},h.prototype._eventLoopRunning=function(){return(0,a.default)(this._eventLoopState.intervalId)},h.prototype._startEventLoop=function(t){if(this._eventLoopRunning()!==t)if(!0===t){var e=this;this._orientationUpdated=!0;var i=1e3/this._maximumUpdatesPerSecond,a=setInterval((function(){e._updateOrientation()}),i);this._eventLoopState={intervalId:a}}else clearInterval(this._eventLoopState.intervalId),this._eventLoopState={}},h.prototype._storeOrientation=function(t){this._alpha=t.alpha,this._beta=t.beta,this._gamma=t.gamma,this._orientationUpdated=!0},h.prototype._updateOrientation=function(){var t=this._getCurrentScreenOrientation();(t!==this._lastScreenOrientation&&(this._orientationUpdated=!0),this._lastScreenOrientation=t,this._orientationUpdated)&&(this._orientationUpdated=!1,(0,a.default)(this._terria.cesium)&&(0,a.default)(this._terria.cesium.viewer)&&(0,a.default)(this._terria.cesium.viewer.camera)&&(this._terria.cesium.viewer.camera.setView(this._getCurrentOrientation(t)),this._terria.currentViewer.notifyRepaintRequired()))},h.prototype._getCurrentOrientation=function(t){var e=this._alpha,i=this._beta,n=this._gamma,r=this._realignAlpha,l=this._realignHeading;return(0,a.default)(t)||(t=this._getCurrentScreenOrientation()),this._computeTerriaOrientation(e,i,n,t,r,l)},h.prototype._computeTerriaOrientation=function(t,e,i,a,n,r){var s,u=o.default.clone(o.default.IDENTITY,u);s=o.default.fromRotationZ(l.default.toRadians(a)),o.default.multiply(u,s,u),s=o.default.fromRotationX(l.default.toRadians(90)),o.default.multiply(u,s,u),s=o.default.fromRotationZ(l.default.toRadians(i)),o.default.multiply(u,s,u),s=o.default.fromRotationX(l.default.toRadians(-e)),o.default.multiply(u,s,u),s=o.default.fromRotationY(l.default.toRadians(-(t-n))),o.default.multiply(u,s,u),s=o.default.fromRotationY(l.default.toRadians(r)),o.default.multiply(u,s,u);var d=u[o.default.COLUMN1ROW0],_=u[o.default.COLUMN1ROW1],h=u[o.default.COLUMN0ROW2],m=u[o.default.COLUMN1ROW2],f=u[o.default.COLUMN2ROW2],g=l.default.toDegrees(Math.atan2(-h,f)),c=l.default.toDegrees(Math.atan2(-d,_)),p=l.default.toDegrees(Math.atan2(-m,Math.sqrt(h*h+f*f)));return{orientation:{roll:l.default.toRadians(c),pitch:l.default.toRadians(p),heading:l.default.toRadians(g)}}},h.prototype._getCurrentScreenOrientation=function(){return(0,a.default)(screen.orientation)&&(0,a.default)(screen.orientation.angle)?screen.orientation.angle:(0,a.default)(window.orientation)?window.orientation:0},t.exports=h},760:function(t,e,i){\"use strict\";var a=m(i(11)),n=m(i(17)),r=m(i(13)),l=m(i(19)),o=m(i(1621)),s=m(i(36)),u=m(i(172)),d=m(i(8)),_=i(26),h=m(i(1622));function m(t){return t&&t.__esModule?t:{default:t}}var f=(0,n.default)({displayName:\"AugmentedVirtualityTool\",mixins:[l.default],propTypes:{terria:r.default.object.isRequired,viewState:r.default.object.isRequired,experimentalWarning:r.default.bool,t:r.default.func.isRequired},getInitialState:function(){return{augmentedVirtuality:new h.default(this.props.terria),experimentalWarningShown:!1,realignHelpShown:!1,resetRealignHelpShown:!1}},handleClickAVTool:function(){if(this.props.terria.augmentedVirtuality=this.state.augmentedVirtuality,(0,d.default)(this.props.experimentalWarning)&&!1!==this.props.experimentalWarning&&!this.state.experimentalWarningShown){this.setState({experimentalWarningShown:!0});var t=this.props.t;this.props.viewState.notifications.push({title:t(\"AR.title\"),message:t(\"AR.experimentalFeatureMessage\"),confirmText:t(\"AR.confirmText\")})}this.state.augmentedVirtuality.toggleEnabled()},handleClickRealign:function(){if(!this.state.realignHelpShown){this.setState({realignHelpShown:!0});var t=this.props.t;this.props.viewState.notifications.push({title:t(\"AR.manualAlignmentTitle\"),message:t(\"AR.manualAlignmentMessage\",{img:'<img width=\"100%\" src=\"./build/TerriaJS/images/ar-realign-guide.gif\" />'}),confirmText:t(\"AR.confirmText\")})}this.state.augmentedVirtuality.toggleManualAlignment()},handleClickResetRealign:function(){if(!this.state.resetRealignHelpShown){this.setState({resetRealignHelpShown:!0});var t=this.props.t;this.props.viewState.notifications.push({title:t(\"AR.resetAlignmentTitle\"),message:t(\"AR.resetAlignmentMessage\"),confirmText:t(\"AR.confirmText\")})}this.state.augmentedVirtuality.resetAlignment()},handleClickHover:function(){this.state.augmentedVirtuality.toggleHoverHeight()},render:function(){var t=this.state.augmentedVirtuality.enabled,e=s.default.GLYPHS.arOff,i=o.default.btn;t&&(e=s.default.GLYPHS.arOn,i=o.default.btnPrimary);var n=this.props.t,r=this.state.augmentedVirtuality.manualAlignment,l=o.default.btn;r&&(l=o.default.btnBlink);var d=this.state.augmentedVirtuality.hoverLevel,_=s.default.GLYPHS.arHover0;switch(d){case 0:_=s.default.GLYPHS.arHover0;break;case 1:_=s.default.GLYPHS.arHover1;break;case 2:_=s.default.GLYPHS.arHover2}return this.props.terria.viewerMode!==u.default.Leaflet?a.default.createElement(\"div\",{className:o.default.augmentedVirtualityTool},a.default.createElement(\"button\",{type:\"button\",className:i,title:n(\"AR.arTool\"),onClick:this.handleClickAVTool},a.default.createElement(s.default,{glyph:e})),t?[a.default.createElement(\"button\",{type:\"button\",className:o.default.btn,title:n(\"AR.btnHover\"),onClick:this.handleClickHover,key:\"0\"},a.default.createElement(s.default,{glyph:_})),this.state.augmentedVirtuality.manualAlignmentSet?null:a.default.createElement(\"button\",{type:\"button\",className:l,title:n(\"AR.btnRealign\"),onClick:this.handleClickRealign,key:\"1\"},a.default.createElement(s.default,{glyph:s.default.GLYPHS.arRealign})),this.state.augmentedVirtuality.manualAlignmentSet&&!r?a.default.createElement(\"button\",{type:\"button\",className:o.default.btn,title:n(\"AR.btnResetRealign\"),onClick:this.handleClickResetRealign,key:\"2\"},a.default.createElement(s.default,{glyph:s.default.GLYPHS.arResetAlignment})):null]:null):null}});t.exports=(0,_.withTranslation)()(f)}}]);","extractedComments":[]}